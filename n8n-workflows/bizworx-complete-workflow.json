
{
  "name": "BizWorx Complete Business Automation with Telegram",
  "nodes": [
    {
      "parameters": {
        "updates": ["message"]
      },
      "id": "telegram-trigger-1234-5678-90ab-cdef",
      "name": "Telegram Bot Trigger",
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1,
      "position": [240, 300],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "values": {
          "string": [
            {
              "name": "baseUrl",
              "value": "https://bluecollarbizworx.replit.app"
            },
            {
              "name": "apiKey",
              "value": "bw_7qtflgzvqmcmbmjhjdg"
            }
          ]
        },
        "options": {}
      },
      "id": "config123-4567-89ab-cdef-0123456789ab",
      "name": "Set BizWorx Config",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.2,
      "position": [460, 300]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.message.text }}",
              "operation": "contains",
              "value2": "/create_job"
            }
          ]
        }
      },
      "id": "if-create-job-1234-5678-90ab-cd",
      "name": "If Create Job Command",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [680, 200]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.message.text }}",
              "operation": "contains",
              "value2": "/create_client"
            }
          ]
        }
      },
      "id": "if-create-client-1234-5678-90ab-cd",
      "name": "If Create Client Command",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [680, 350]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.message.text }}",
              "operation": "contains",
              "value2": "/get_stats"
            }
          ]
        }
      },
      "id": "if-get-stats-1234-5678-90ab-cd",
      "name": "If Get Stats Command",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [680, 500]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "url": "={{$node[\"Set BizWorx Config\"].json[\"baseUrl\"]}}/api/external/jobs",
        "options": {
          "headers": {
            "X-API-Key": "={{$node[\"Set BizWorx Config\"].json[\"apiKey\"]}}",
            "Content-Type": "application/json"
          },
          "body": {
            "bodyType": "json",
            "value": {
              "clientId": "={{ $json.clientId || 1 }}",
              "title": "={{ $json.title || 'New Job from Telegram' }}",
              "description": "={{ $json.description || 'Job created via Telegram bot' }}",
              "scheduledStart": "={{ $json.scheduledStart || new Date().toISOString() }}",
              "status": "scheduled",
              "priority": "normal"
            }
          }
        }
      },
      "id": "create-job-api-1234-5678-90ab-cdef",
      "name": "Create Job via API",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [900, 200]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "url": "={{$node[\"Set BizWorx Config\"].json[\"baseUrl\"]}}/api/external/clients",
        "options": {
          "headers": {
            "X-API-Key": "={{$node[\"Set BizWorx Config\"].json[\"apiKey\"]}}",
            "Content-Type": "application/json"
          },
          "body": {
            "bodyType": "json",
            "value": {
              "name": "={{ $json.name || 'New Client from Telegram' }}",
              "email": "={{ $json.email || 'client@example.com' }}",
              "phone": "={{ $json.phone || '' }}",
              "address": "={{ $json.address || '' }}"
            }
          }
        }
      },
      "id": "create-client-api-1234-5678-90ab-cdef",
      "name": "Create Client via API",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [900, 350]
    },
    {
      "parameters": {
        "httpMethod": "GET",
        "url": "={{$node[\"Set BizWorx Config\"].json[\"baseUrl\"]}}/api/external/dashboard/stats",
        "options": {
          "headers": {
            "X-API-Key": "={{$node[\"Set BizWorx Config\"].json[\"apiKey\"]}}"
          }
        }
      },
      "id": "get-stats-api-1234-5678-90ab-cdef",
      "name": "Get Dashboard Stats",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [900, 500]
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Bot Trigger\"].json[\"message\"][\"chat\"][\"id\"] }}",
        "text": "âœ… **Job Created Successfully!**\n\nðŸ“‹ **Job Details:**\nâ€¢ Title: {{ $node[\"Create Job via API\"].json[\"title\"] }}\nâ€¢ Status: {{ $node[\"Create Job via API\"].json[\"status\"] }}\nâ€¢ Priority: {{ $node[\"Create Job via API\"].json[\"priority\"] }}\nâ€¢ Created: {{ new Date().toLocaleString() }}\n\nðŸ”— Job ID: {{ $node[\"Create Job via API\"].json[\"id\"] }}"
      },
      "id": "telegram-job-response-1234-5678-90ab",
      "name": "Send Job Creation Confirmation",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.1,
      "position": [1120, 200],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Bot Trigger\"].json[\"message\"][\"chat\"][\"id\"] }}",
        "text": "âœ… **Client Created Successfully!**\n\nðŸ‘¤ **Client Details:**\nâ€¢ Name: {{ $node[\"Create Client via API\"].json[\"name\"] }}\nâ€¢ Email: {{ $node[\"Create Client via API\"].json[\"email\"] }}\nâ€¢ Phone: {{ $node[\"Create Client via API\"].json[\"phone\"] }}\nâ€¢ Created: {{ new Date().toLocaleString() }}\n\nðŸ”— Client ID: {{ $node[\"Create Client via API\"].json[\"id\"] }}"
      },
      "id": "telegram-client-response-1234-5678-90ab",
      "name": "Send Client Creation Confirmation",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.1,
      "position": [1120, 350],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Bot Trigger\"].json[\"message\"][\"chat\"][\"id\"] }}",
        "text": "ðŸ“Š **Dashboard Statistics**\n\nðŸ’° **Revenue:** ${{ $node[\"Get Dashboard Stats\"].json[\"revenue\"][\"total\"] || 0 }}\nðŸ“… **Today's Jobs:** {{ $node[\"Get Dashboard Stats\"].json[\"todaysJobs\"].length || 0 }}\nðŸ“‹ **Recent Invoices:** {{ $node[\"Get Dashboard Stats\"].json[\"recentInvoices\"].length || 0 }}\nðŸ‘¥ **Team Members:** {{ $node[\"Get Dashboard Stats\"].json[\"teamMembers\"].length || 0 }}\n\nðŸ“ˆ Updated: {{ new Date().toLocaleString() }}"
      },
      "id": "telegram-stats-response-1234-5678-90ab",
      "name": "Send Stats Response",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.1,
      "position": [1120, 500],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Bot Trigger\"].json[\"message\"][\"chat\"][\"id\"] }}",
        "text": "ðŸ¤– **BizWorx Bot Commands:**\n\nðŸ“‹ `/create_job` - Create a new job\nðŸ‘¤ `/create_client` - Add a new client\nðŸ“Š `/get_stats` - View dashboard statistics\nðŸ“… `/get_jobs` - List today's jobs\nðŸ’° `/get_invoices` - View recent invoices\n\nðŸ’¡ **Example:** \n`/create_job title:\"Fix plumbing\" client:1`\n\nâ“ Need help? Just type your command!"
      },
      "id": "telegram-help-response-1234-5678-90ab",
      "name": "Send Help Response",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.1,
      "position": [1120, 650],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.message.text }}",
              "operation": "contains",
              "value2": "/help"
            }
          ]
        }
      },
      "id": "if-help-command-1234-5678-90ab-cd",
      "name": "If Help Command",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [680, 650]
    },
    {
      "parameters": {
        "path": "telegram-webhook",
        "options": {}
      },
      "id": "webhook-telegram-1234-5678-90ab-cde",
      "name": "Telegram Webhook Receiver",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [240, 800],
      "webhookId": "telegram-bizworx-webhook"
    },
    {
      "parameters": {
        "triggerTimes": {
          "item": [
            {
              "mode": "everyHour"
            }
          ]
        }
      },
      "id": "cron-trigger-1234-5678-90ab-cdef01",
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [240, 950]
    },
    {
      "parameters": {
        "httpMethod": "GET",
        "url": "={{$node[\"Set BizWorx Config\"].json[\"baseUrl\"]}}/api/external/jobs/date/{{new Date().toISOString().split('T')[0]}}",
        "options": {
          "headers": {
            "X-API-Key": "={{$node[\"Set BizWorx Config\"].json[\"apiKey\"]}}"
          }
        }
      },
      "id": "get-todays-jobs-1234-5678-90ab-cdef",
      "name": "Get Today's Jobs",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [460, 950]
    },
    {
      "parameters": {
        "chatId": "YOUR_TELEGRAM_CHAT_ID",
        "text": "ðŸŒ… **Daily Job Reminder**\n\nðŸ“… **Today's Schedule ({{ new Date().toLocaleDateString() }}):**\n\n{{ $node[\"Get Today's Jobs\"].json.map(job => `â€¢ ${job.title} - ${job.scheduledStart ? new Date(job.scheduledStart).toLocaleTimeString() : 'Time TBD'}`).join('\\n') || 'â€¢ No jobs scheduled for today' }}\n\nâœ… Have a productive day!"
      },
      "id": "telegram-daily-reminder-1234-5678-90ab",
      "name": "Send Daily Job Reminder",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.1,
      "position": [680, 950],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot API"
        }
      }
    }
  ],
  "connections": {
    "Telegram Bot Trigger": {
      "main": [
        [
          {
            "node": "Set BizWorx Config",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set BizWorx Config": {
      "main": [
        [
          {
            "node": "If Create Job Command",
            "type": "main",
            "index": 0
          },
          {
            "node": "If Create Client Command",
            "type": "main",
            "index": 0
          },
          {
            "node": "If Get Stats Command",
            "type": "main",
            "index": 0
          },
          {
            "node": "If Help Command",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Create Job Command": {
      "main": [
        [
          {
            "node": "Create Job via API",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Create Client Command": {
      "main": [
        [
          {
            "node": "Create Client via API",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Get Stats Command": {
      "main": [
        [
          {
            "node": "Get Dashboard Stats",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Help Command": {
      "main": [
        [
          {
            "node": "Send Help Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Job via API": {
      "main": [
        [
          {
            "node": "Send Job Creation Confirmation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Client via API": {
      "main": [
        [
          {
            "node": "Send Client Creation Confirmation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Dashboard Stats": {
      "main": [
        [
          {
            "node": "Send Stats Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Get Today's Jobs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Today's Jobs": {
      "main": [
        [
          {
            "node": "Send Daily Job Reminder",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2024-01-07T12:00:00.000Z",
  "id": "bizworx-telegram-workflow",
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "BizWorx Complete Business Automation with Telegram",
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [
    {
      "createdAt": "2024-01-07T12:00:00.000Z",
      "id": "bizworx-telegram-automation",
      "name": "BizWorx Telegram Automation",
      "updatedAt": "2024-01-07T12:00:00.000Z"
    }
  ],
  "triggerCount": 0,
  "updatedAt": "2024-01-07T12:00:00.000Z",
  "versionId": "2"
}
