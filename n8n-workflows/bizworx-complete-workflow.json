
{
  "name": "BizWorx Complete Business Automation with Telegram",
  "nodes": [
    {
      "parameters": {
        "updates": ["message"]
      },
      "id": "telegram-trigger-1234-5678-90ab-cdef",
      "name": "Telegram Bot Trigger",
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1,
      "position": [240, 300],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "values": {
          "string": [
            {
              "name": "baseUrl",
              "value": "https://bluecollarbizworx.replit.app"
            },
            {
              "name": "apiKey",
              "value": "bw_7qtflgzvqmcmbmjhjdg"
            }
          ]
        },
        "options": {}
      },
      "id": "config123-4567-89ab-cdef-0123456789ab",
      "name": "Set BizWorx Config",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.2,
      "position": [460, 300]
    },
    {
      "parameters": {
        "jsCode": "// Enhanced Natural Language Processing for Telegram\nconst messageText = $input.first().json.message.text;\nconst chatId = $input.first().json.message.chat.id;\nconst isVoiceMessage = $input.first().json.message.voice;\n\n// Extract traditional command if present\nconst commandMatch = messageText.match(/^\\/([a-zA-Z_]+)/);\nconst explicitCommand = commandMatch ? commandMatch[1] : null;\n\n// Determine intent from natural language\nlet intent = explicitCommand;\nif (!intent) {\n  const lowerText = messageText.toLowerCase();\n  \n  // Intent detection based on keywords and context\n  if (lowerText.includes('create') || lowerText.includes('new') || lowerText.includes('add')) {\n    if (lowerText.includes('job') || lowerText.includes('work') || lowerText.includes('appointment') || lowerText.includes('schedule')) {\n      intent = 'create_job';\n    } else if (lowerText.includes('client') || lowerText.includes('customer')) {\n      intent = 'create_client';\n    } else if (lowerText.includes('invoice') || lowerText.includes('bill')) {\n      intent = 'create_invoice';\n    } else if (lowerText.includes('estimate') || lowerText.includes('quote')) {\n      intent = 'create_estimate';\n    }\n  } else if (lowerText.includes('schedule') || lowerText.includes('book')) {\n    intent = 'schedule_job';\n  } else if (lowerText.includes('get') || lowerText.includes('show') || lowerText.includes('list')) {\n    if (lowerText.includes('stats') || lowerText.includes('dashboard') || lowerText.includes('summary')) {\n      intent = 'get_stats';\n    } else if (lowerText.includes('job')) {\n      intent = 'get_jobs';\n    } else if (lowerText.includes('invoice')) {\n      intent = 'get_invoices';\n    }\n  } else if (lowerText.includes('help') || lowerText.includes('what can') || lowerText.includes('commands')) {\n    intent = 'help';\n  } else {\n    // Default to job creation for unrecognized patterns\n    intent = 'create_job';\n  }\n}\n\n// Parse traditional parameters if they exist\nconst parseParams = (text) => {\n  const params = {};\n  const paramMatches = text.match(/([a-zA-Z]+):(\"[^\"]*\"|[^\\s]+)/g) || [];\n  paramMatches.forEach(match => {\n    const [key, value] = match.split(':');\n    params[key] = value.replace(/\"/g, '');\n  });\n  return params;\n};\n\nconst traditionalParams = parseParams(messageText);\n\n// For natural language, we'll let the AI processing endpoint handle extraction\nconst isNaturalLanguage = !explicitCommand && !Object.keys(traditionalParams).length;\n\nreturn {\n  command: intent,\n  chatId: chatId,\n  originalMessage: messageText,\n  isVoiceMessage: !!isVoiceMessage,\n  isNaturalLanguage: isNaturalLanguage,\n  intent: intent,\n  \n  // Traditional parameter extraction for backward compatibility\n  parameters: traditionalParams,\n  clientId: traditionalParams.clientId || traditionalParams.client || null,\n  title: traditionalParams.title || null,\n  description: traditionalParams.description || (isNaturalLanguage ? messageText : null),\n  scheduledStart: traditionalParams.scheduledStart || traditionalParams.start || null,\n  scheduledEnd: traditionalParams.scheduledEnd || traditionalParams.end || null,\n  priority: traditionalParams.priority || 'normal',\n  status: traditionalParams.status || 'draft',\n  name: traditionalParams.name || null,\n  email: traditionalParams.email || null,\n  phone: traditionalParams.phone || null,\n  address: traditionalParams.address || null,\n  jobId: traditionalParams.jobId || traditionalParams.job || null,\n  dueDate: traditionalParams.dueDate || traditionalParams.due || null,\n  validUntil: traditionalParams.validUntil || traditionalParams.valid || null,\n  invoiceId: traditionalParams.invoiceId || traditionalParams.invoice || null,\n  estimateId: traditionalParams.estimateId || traditionalParams.estimate || null,\n  items: traditionalParams.items ? JSON.parse(traditionalParams.items) : [],\n  \n  // Flag to trigger AI processing\n  needsAiProcessing: isNaturalLanguage\n};"
      },
      "id": "parse-command-1234-5678-90ab-cdef",
      "name": "Parse Command & Parameters",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [680, 300]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.command }}",
              "operation": "equal",
              "value2": "create_job"
            }
          ]
        }
      },
      "id": "if-create-job-1234-5678-90ab-cd",
      "name": "If Create Job Command",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [900, 100]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.command }}",
              "operation": "equal",
              "value2": "schedule_job"
            }
          ]
        }
      },
      "id": "if-schedule-job-1234-5678-90ab-cd",
      "name": "If Schedule Job Command",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [900, 200]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.command }}",
              "operation": "equal",
              "value2": "create_client"
            }
          ]
        }
      },
      "id": "if-create-client-1234-5678-90ab-cd",
      "name": "If Create Client Command",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [900, 300]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.command }}",
              "operation": "equal",
              "value2": "create_invoice"
            }
          ]
        }
      },
      "id": "if-create-invoice-1234-5678-90ab-cd",
      "name": "If Create Invoice Command",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [900, 400]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.command }}",
              "operation": "equal",
              "value2": "edit_invoice"
            }
          ]
        }
      },
      "id": "if-edit-invoice-1234-5678-90ab-cd",
      "name": "If Edit Invoice Command",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,

    {
      "parameters": {
        "httpMethod": "POST",
        "url": "={{$node[\"Set BizWorx Config\"].json[\"baseUrl\"]}}/api/ai/process-command",
        "options": {
          "headers": {
            "X-API-Key": "={{$node[\"Set BizWorx Config\"].json[\"apiKey\"]}}",
            "Content-Type": "application/json"
          },
          "body": {
            "bodyType": "json",
            "value": {
              "message": "={{ $json.originalMessage }}",
              "intent": "={{ $json.intent }}"
            }
          }
        },
        "conditions": {
          "boolean": [
            {
              "value1": "={{ $json.needsAiProcessing }}",
              "value2": true
            }
          ]
        }
      },
      "id": "ai-process-command-1234-5678-90ab-cdef",
      "name": "AI Process Natural Language",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [900, 150]
    },
    {
      "parameters": {
        "jsCode": "// Merge AI-processed data with original command data\nconst originalData = $input.first().json;\nconst aiData = $input.last().json;\n\n// If AI processing was successful, merge the extracted fields\nif (aiData && aiData.extractedFields) {\n  const merged = {\n    ...originalData,\n    // Override with AI-extracted data where available\n    clientId: aiData.extractedFields.clientId || originalData.clientId,\n    title: aiData.extractedFields.title || originalData.title || 'New Task',\n    description: aiData.extractedFields.description || originalData.description,\n    scheduledStart: aiData.extractedFields.scheduledDate ? \n      (aiData.extractedFields.scheduledTime ? \n        new Date(`${aiData.extractedFields.scheduledDate}T${convertTo24Hour(aiData.extractedFields.scheduledTime)}`).toISOString() :\n        new Date(`${aiData.extractedFields.scheduledDate}T09:00:00`).toISOString()\n      ) : originalData.scheduledStart,\n    priority: aiData.extractedFields.priority || originalData.priority,\n    name: aiData.extractedFields.newClientName || aiData.extractedFields.clientName || originalData.name,\n    email: aiData.extractedFields.email || originalData.email,\n    phone: aiData.extractedFields.phone || originalData.phone,\n    address: aiData.extractedFields.address || originalData.address,\n    estimatedAmount: aiData.extractedFields.amount?.toString() || originalData.estimatedAmount,\n    \n    // Add AI-specific data\n    aiProcessed: true,\n    aiConfidence: aiData.confidence || 0,\n    suggestedAction: aiData.suggestedAction\n  };\n  \n  return merged;\n} else {\n  // Return original data if AI processing failed\n  return originalData;\n}\n\n// Helper function to convert 12-hour to 24-hour format\nfunction convertTo24Hour(time12h) {\n  const [time, modifier] = time12h.split(/\\s+/);\n  let [hours, minutes] = time.split(':');\n  \n  if (hours === '12') {\n    hours = '00';\n  }\n  \n  if (modifier && modifier.toLowerCase() === 'pm') {\n    hours = parseInt(hours, 10) + 12;\n  }\n  \n  return `${hours.toString().padStart(2, '0')}:${minutes || '00'}:00`;\n}"
      },
      "id": "merge-ai-data-1234-5678-90ab-cdef",
      "name": "Merge AI Processed Data",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1120, 150]
    },

      "position": [900, 500]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.command }}",
              "operation": "equal",
              "value2": "create_estimate"
            }
          ]
        }
      },
      "id": "if-create-estimate-1234-5678-90ab-cd",
      "name": "If Create Estimate Command",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [900, 600]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.command }}",
              "operation": "equal",
              "value2": "edit_estimate"
            }
          ]
        }
      },
      "id": "if-edit-estimate-1234-5678-90ab-cd",
      "name": "If Edit Estimate Command",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [900, 700]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.command }}",
              "operation": "equal",
              "value2": "get_stats"
            }
          ]
        }
      },
      "id": "if-get-stats-1234-5678-90ab-cd",
      "name": "If Get Stats Command",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [900, 800]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.command }}",
              "operation": "equal",
              "value2": "get_jobs"
            }
          ]
        }
      },
      "id": "if-get-jobs-1234-5678-90ab-cd",
      "name": "If Get Jobs Command",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [900, 900]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.command }}",
              "operation": "equal",
              "value2": "get_invoices"
            }
          ]
        }
      },
      "id": "if-get-invoices-1234-5678-90ab-cd",
      "name": "If Get Invoices Command",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [900, 1000]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.command }}",
              "operation": "equal",
              "value2": "help"
            }
          ]
        }
      },
      "id": "if-help-command-1234-5678-90ab-cd",
      "name": "If Help Command",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [900, 1100]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "url": "={{$node[\"Set BizWorx Config\"].json[\"baseUrl\"]}}/api/external/jobs",
        "options": {
          "headers": {
            "X-API-Key": "={{$node[\"Set BizWorx Config\"].json[\"apiKey\"]}}",
            "Content-Type": "application/json"
          },
          "body": {
            "bodyType": "json",
            "value": {
              "clientId": "={{ $json.clientId }}",
              "title": "={{ $json.title }}",
              "description": "={{ $json.description }}",
              "scheduledStart": "={{ $json.scheduledStart }}",
              "status": "scheduled",
              "priority": "={{ $json.priority }}"
            }
          }
        }
      },
      "id": "create-job-api-1234-5678-90ab-cdef",
      "name": "Create Job via API",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1120, 100]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "url": "={{$node[\"Set BizWorx Config\"].json[\"baseUrl\"]}}/api/external/jobs",
        "options": {
          "headers": {
            "X-API-Key": "={{$node[\"Set BizWorx Config\"].json[\"apiKey\"]}}",
            "Content-Type": "application/json"
          },
          "body": {
            "bodyType": "json",
            "value": {
              "clientId": "={{ $json.clientId }}",
              "title": "={{ $json.title }}",
              "description": "={{ $json.description }}",
              "scheduledStart": "={{ $json.scheduledStart }}",
              "scheduledEnd": "={{ $json.scheduledEnd }}",
              "status": "scheduled",
              "priority": "={{ $json.priority }}"
            }
          }
        }
      },
      "id": "schedule-job-api-1234-5678-90ab-cdef",
      "name": "Schedule Job via API",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1120, 200]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "url": "={{$node[\"Set BizWorx Config\"].json[\"baseUrl\"]}}/api/external/clients",
        "options": {
          "headers": {
            "X-API-Key": "={{$node[\"Set BizWorx Config\"].json[\"apiKey\"]}}",
            "Content-Type": "application/json"
          },
          "body": {
            "bodyType": "json",
            "value": {
              "name": "={{ $json.name || 'New Client from Telegram' }}",
              "email": "={{ $json.email || 'client@example.com' }}",
              "phone": "={{ $json.phone || '' }}",
              "address": "={{ $json.address || '' }}"
            }
          }
        }
      },
      "id": "create-client-api-1234-5678-90ab-cdef",
      "name": "Create Client via API",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1120, 300]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "url": "={{$node[\"Set BizWorx Config\"].json[\"baseUrl\"]}}/api/external/invoices",
        "options": {
          "headers": {
            "X-API-Key": "={{$node[\"Set BizWorx Config\"].json[\"apiKey\"]}}",
            "Content-Type": "application/json"
          },
          "body": {
            "bodyType": "json",
            "value": {
              "clientId": "={{ $json.clientId }}",
              "jobId": "={{ $json.jobId }}",
              "dueDate": "={{ $json.dueDate || new Date(Date.now() + 30*24*60*60*1000).toISOString() }}",
              "items": "={{ $json.items }}",
              "status": "={{ $json.status }}"
            }
          }
        }
      },
      "id": "create-invoice-api-1234-5678-90ab-cdef",
      "name": "Create Invoice via API",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1120, 400]
    },
    {
      "parameters": {
        "httpMethod": "PUT",
        "url": "={{$node[\"Set BizWorx Config\"].json[\"baseUrl\"]}}/api/external/invoices/{{ $json.invoiceId }}",
        "options": {
          "headers": {
            "X-API-Key": "={{$node[\"Set BizWorx Config\"].json[\"apiKey\"]}}",
            "Content-Type": "application/json"
          },
          "body": {
            "bodyType": "json",
            "value": {
              "status": "={{ $json.status }}",
              "dueDate": "={{ $json.dueDate }}",
              "items": "={{ $json.items }}"
            }
          }
        }
      },
      "id": "edit-invoice-api-1234-5678-90ab-cdef",
      "name": "Edit Invoice via API",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1120, 500]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "url": "={{$node[\"Set BizWorx Config\"].json[\"baseUrl\"]}}/api/external/estimates",
        "options": {
          "headers": {
            "X-API-Key": "={{$node[\"Set BizWorx Config\"].json[\"apiKey\"]}}",
            "Content-Type": "application/json"
          },
          "body": {
            "bodyType": "json",
            "value": {
              "clientId": "={{ $json.clientId }}",
              "title": "={{ $json.title }}",
              "description": "={{ $json.description }}",
              "validUntil": "={{ $json.validUntil || new Date(Date.now() + 30*24*60*60*1000).toISOString() }}",
              "items": "={{ $json.items }}",
              "status": "={{ $json.status }}"
            }
          }
        }
      },
      "id": "create-estimate-api-1234-5678-90ab-cdef",
      "name": "Create Estimate via API",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1120, 600]
    },
    {
      "parameters": {
        "httpMethod": "PUT",
        "url": "={{$node[\"Set BizWorx Config\"].json[\"baseUrl\"]}}/api/external/estimates/{{ $json.estimateId }}",
        "options": {
          "headers": {
            "X-API-Key": "={{$node[\"Set BizWorx Config\"].json[\"apiKey\"]}}",
            "Content-Type": "application/json"
          },
          "body": {
            "bodyType": "json",
            "value": {
              "status": "={{ $json.status }}",
              "validUntil": "={{ $json.validUntil }}",
              "items": "={{ $json.items }}"
            }
          }
        }
      },
      "id": "edit-estimate-api-1234-5678-90ab-cdef",
      "name": "Edit Estimate via API",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1120, 700]
    },
    {
      "parameters": {
        "httpMethod": "GET",
        "url": "={{$node[\"Set BizWorx Config\"].json[\"baseUrl\"]}}/api/external/dashboard/stats",
        "options": {
          "headers": {
            "X-API-Key": "={{$node[\"Set BizWorx Config\"].json[\"apiKey\"]}}"
          }
        }
      },
      "id": "get-stats-api-1234-5678-90ab-cdef",
      "name": "Get Dashboard Stats",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1120, 800]
    },
    {
      "parameters": {
        "httpMethod": "GET",
        "url": "={{$node[\"Set BizWorx Config\"].json[\"baseUrl\"]}}/api/external/jobs",
        "options": {
          "headers": {
            "X-API-Key": "={{$node[\"Set BizWorx Config\"].json[\"apiKey\"]}}"
          }
        }
      },
      "id": "get-jobs-api-1234-5678-90ab-cdef",
      "name": "Get Jobs List",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1120, 900]
    },
    {
      "parameters": {
        "httpMethod": "GET",
        "url": "={{$node[\"Set BizWorx Config\"].json[\"baseUrl\"]}}/api/external/invoices",
        "options": {
          "headers": {
            "X-API-Key": "={{$node[\"Set BizWorx Config\"].json[\"apiKey\"]}}"
          }
        }
      },
      "id": "get-invoices-api-1234-5678-90ab-cdef",
      "name": "Get Invoices List",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1120, 1000]
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "✅ **Job Created Successfully!**\n\n📋 **Job Details:**\n• Title: {{ $node[\"Create Job via API\"].json[\"title\"] }}\n• Status: {{ $node[\"Create Job via API\"].json[\"status\"] }}\n• Priority: {{ $node[\"Create Job via API\"].json[\"priority\"] }}\n• Created: {{ new Date().toLocaleString() }}\n\n🔗 Job ID: {{ $node[\"Create Job via API\"].json[\"id\"] }}"
      },
      "id": "telegram-job-response-1234-5678-90ab",
      "name": "Send Job Creation Confirmation",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.1,
      "position": [1340, 100],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "📅 **Job Scheduled Successfully!**\n\n📋 **Schedule Details:**\n• Title: {{ $node[\"Schedule Job via API\"].json[\"title\"] }}\n• Start: {{ new Date($node[\"Schedule Job via API\"].json[\"scheduledStart\"]).toLocaleString() }}\n• Status: {{ $node[\"Schedule Job via API\"].json[\"status\"] }}\n• Priority: {{ $node[\"Schedule Job via API\"].json[\"priority\"] }}\n\n🔗 Job ID: {{ $node[\"Schedule Job via API\"].json[\"id\"] }}"
      },
      "id": "telegram-schedule-response-1234-5678-90ab",
      "name": "Send Job Schedule Confirmation",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.1,
      "position": [1340, 200],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "✅ **Client Created Successfully!**\n\n👤 **Client Details:**\n• Name: {{ $node[\"Create Client via API\"].json[\"name\"] }}\n• Email: {{ $node[\"Create Client via API\"].json[\"email\"] }}\n• Phone: {{ $node[\"Create Client via API\"].json[\"phone\"] }}\n• Created: {{ new Date().toLocaleString() }}\n\n🔗 Client ID: {{ $node[\"Create Client via API\"].json[\"id\"] }}"
      },
      "id": "telegram-client-response-1234-5678-90ab",
      "name": "Send Client Creation Confirmation",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.1,
      "position": [1340, 300],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "💰 **Invoice Created Successfully!**\n\n📄 **Invoice Details:**\n• Invoice ID: {{ $node[\"Create Invoice via API\"].json[\"id\"] }}\n• Client ID: {{ $node[\"Create Invoice via API\"].json[\"clientId\"] }}\n• Status: {{ $node[\"Create Invoice via API\"].json[\"status\"] }}\n• Due Date: {{ new Date($node[\"Create Invoice via API\"].json[\"dueDate\"]).toLocaleDateString() }}\n• Created: {{ new Date().toLocaleString() }}\n\n🔗 Invoice #{{ $node[\"Create Invoice via API\"].json[\"id\"] }}"
      },
      "id": "telegram-invoice-response-1234-5678-90ab",
      "name": "Send Invoice Creation Confirmation",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.1,
      "position": [1340, 400],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "✏️ **Invoice Updated Successfully!**\n\n📄 **Updated Invoice:**\n• Invoice ID: {{ $json.invoiceId }}\n• Status: {{ $node[\"Edit Invoice via API\"].json[\"status\"] }}\n• Due Date: {{ new Date($node[\"Edit Invoice via API\"].json[\"dueDate\"]).toLocaleDateString() }}\n• Updated: {{ new Date().toLocaleString() }}\n\n✅ Changes saved successfully!"
      },
      "id": "telegram-invoice-edit-response-1234-5678-90ab",
      "name": "Send Invoice Edit Confirmation",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.1,
      "position": [1340, 500],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "📊 **Estimate Created Successfully!**\n\n📋 **Estimate Details:**\n• Estimate ID: {{ $node[\"Create Estimate via API\"].json[\"id\"] }}\n• Title: {{ $node[\"Create Estimate via API\"].json[\"title\"] }}\n• Client ID: {{ $node[\"Create Estimate via API\"].json[\"clientId\"] }}\n• Status: {{ $node[\"Create Estimate via API\"].json[\"status\"] }}\n• Valid Until: {{ new Date($node[\"Create Estimate via API\"].json[\"validUntil\"]).toLocaleDateString() }}\n• Created: {{ new Date().toLocaleString() }}\n\n🔗 Estimate #{{ $node[\"Create Estimate via API\"].json[\"id\"] }}"
      },
      "id": "telegram-estimate-response-1234-5678-90ab",
      "name": "Send Estimate Creation Confirmation",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.1,
      "position": [1340, 600],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "✏️ **Estimate Updated Successfully!**\n\n📋 **Updated Estimate:**\n• Estimate ID: {{ $json.estimateId }}\n• Status: {{ $node[\"Edit Estimate via API\"].json[\"status\"] }}\n• Valid Until: {{ new Date($node[\"Edit Estimate via API\"].json[\"validUntil\"]).toLocaleDateString() }}\n• Updated: {{ new Date().toLocaleString() }}\n\n✅ Changes saved successfully!"
      },
      "id": "telegram-estimate-edit-response-1234-5678-90ab",
      "name": "Send Estimate Edit Confirmation",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.1,
      "position": [1340, 700],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "📊 **Dashboard Statistics**\n\n💰 **Revenue:** ${{ $node[\"Get Dashboard Stats\"].json[\"revenue\"][\"total\"] || 0 }}\n📅 **Today's Jobs:** {{ $node[\"Get Dashboard Stats\"].json[\"todaysJobs\"].length || 0 }}\n📋 **Recent Invoices:** {{ $node[\"Get Dashboard Stats\"].json[\"recentInvoices\"].length || 0 }}\n👥 **Team Members:** {{ $node[\"Get Dashboard Stats\"].json[\"teamMembers\"].length || 0 }}\n\n📈 Updated: {{ new Date().toLocaleString() }}"
      },
      "id": "telegram-stats-response-1234-5678-90ab",
      "name": "Send Stats Response",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.1,
      "position": [1340, 800],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "📋 **Current Jobs List**\n\n{{ $node[\"Get Jobs List\"].json.slice(0,10).map((job, index) => `${index + 1}. **${job.title}**\\n   Status: ${job.status}\\n   Client: ${job.clientId}\\n   Scheduled: ${job.scheduledStart ? new Date(job.scheduledStart).toLocaleDateString() : 'Not scheduled'}\\n`).join('\\n') || 'No jobs found' }}\n\n📊 Total Jobs: {{ $node[\"Get Jobs List\"].json.length || 0 }}\n📅 Updated: {{ new Date().toLocaleString() }}"
      },
      "id": "telegram-jobs-response-1234-5678-90ab",
      "name": "Send Jobs List Response",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.1,
      "position": [1340, 900],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "💰 **Recent Invoices**\n\n{{ $node[\"Get Invoices List\"].json.slice(0,10).map((invoice, index) => `${index + 1}. **Invoice #${invoice.id}**\\n   Client: ${invoice.clientId}\\n   Status: ${invoice.status}\\n   Due: ${invoice.dueDate ? new Date(invoice.dueDate).toLocaleDateString() : 'No due date'}\\n   Amount: $${invoice.total || 0}\\n`).join('\\n') || 'No invoices found' }}\n\n📊 Total Invoices: {{ $node[\"Get Invoices List\"].json.length || 0 }}\n📅 Updated: {{ new Date().toLocaleString() }}"
      },
      "id": "telegram-invoices-response-1234-5678-90ab",
      "name": "Send Invoices List Response",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.1,
      "position": [1340, 1000],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "🤖 **BizWorx Bot - Smart Business Assistant**\n\n**🗣️ Natural Language Commands:**\nJust speak or type naturally! Examples:\n\n**📋 Job Management:**\n• \"Schedule a plumbing job for John Smith tomorrow at 2 PM\"\n• \"Create urgent electrical work for 123 Main St\"\n• \"Book maintenance for next Tuesday\"\n• \"Show me today's jobs\"\n\n**👤 Client Management:**\n• \"Add new client Sarah Johnson, email sarah@email.com, phone 555-1234\"\n• \"Create client Mike's Auto Shop on Oak Street\"\n\n**💰 Invoice & Estimates:**\n• \"Create invoice for plumbing job, $350 for John Smith\"\n• \"Make estimate for bathroom remodel, $2500\"\n• \"Bill customer for yesterday's work\"\n• \"Show recent invoices\"\n\n**📈 Business Stats:**\n• \"Show dashboard stats\"\n• \"What's my revenue this month?\"\n• \"How many jobs today?\"\n\n**🎙️ Voice Commands Supported!**\nSend voice messages - I understand spoken commands too!\n\n**⚡ Traditional Commands Still Work:**\n• `/create_job title:\"Job Name\" client:1`\n• `/get_stats` - Dashboard stats\n• `/help` - This help\n\n**💡 Tips:**\n• Mention client names, dates, amounts, and addresses\n• Use \"urgent\" or \"high priority\" for important jobs\n• Include phone/email when adding clients\n• Speak naturally - I'll understand!\n\n🚀 **AI-Powered Business Automation!**"
      },
      "id": "telegram-help-response-1234-5678-90ab",
      "name": "Send Help Response",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.1,
      "position": [1340, 1100],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot API"
        }
      }
    }
  ],
  "connections": {
    "Telegram Bot Trigger": {
      "main": [
        [
          {
            "node": "Set BizWorx Config",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set BizWorx Config": {
      "main": [
        [
          {
            "node": "Parse Command & Parameters",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse Command & Parameters": {
      "main": [
        [
          {
            "node": "AI Process Natural Language",
            "type": "main",
            "index": 0
          },
          {
            "node": "Merge AI Processed Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Process Natural Language": {
      "main": [
        [
          {
            "node": "Merge AI Processed Data",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Merge AI Processed Data": {
      "main": [
        [
          {
            "node": "If Create Job Command",
            "type": "main",
            "index": 0
          },
          {
            "node": "If Schedule Job Command",
            "type": "main",
            "index": 0
          },
          {
            "node": "If Create Client Command",
            "type": "main",
            "index": 0
          },
          {
            "node": "If Create Invoice Command",
            "type": "main",
            "index": 0
          },
          {
            "node": "If Edit Invoice Command",
            "type": "main",
            "index": 0
          },
          {
            "node": "If Create Estimate Command",
            "type": "main",
            "index": 0
          },
          {
            "node": "If Edit Estimate Command",
            "type": "main",
            "index": 0
          },
          {
            "node": "If Get Stats Command",
            "type": "main",
            "index": 0
          },
          {
            "node": "If Get Jobs Command",
            "type": "main",
            "index": 0
          },
          {
            "node": "If Get Invoices Command",
            "type": "main",
            "index": 0
          },
          {
            "node": "If Help Command",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Create Job Command": {
      "main": [
        [
          {
            "node": "Create Job via API",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Schedule Job Command": {
      "main": [
        [
          {
            "node": "Schedule Job via API",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Create Client Command": {
      "main": [
        [
          {
            "node": "Create Client via API",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Create Invoice Command": {
      "main": [
        [
          {
            "node": "Create Invoice via API",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Edit Invoice Command": {
      "main": [
        [
          {
            "node": "Edit Invoice via API",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Create Estimate Command": {
      "main": [
        [
          {
            "node": "Create Estimate via API",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Edit Estimate Command": {
      "main": [
        [
          {
            "node": "Edit Estimate via API",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Get Stats Command": {
      "main": [
        [
          {
            "node": "Get Dashboard Stats",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Get Jobs Command": {
      "main": [
        [
          {
            "node": "Get Jobs List",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Get Invoices Command": {
      "main": [
        [
          {
            "node": "Get Invoices List",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Help Command": {
      "main": [
        [
          {
            "node": "Send Help Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Job via API": {
      "main": [
        [
          {
            "node": "Send Job Creation Confirmation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Job via API": {
      "main": [
        [
          {
            "node": "Send Job Schedule Confirmation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Client via API": {
      "main": [
        [
          {
            "node": "Send Client Creation Confirmation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Invoice via API": {
      "main": [
        [
          {
            "node": "Send Invoice Creation Confirmation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Invoice via API": {
      "main": [
        [
          {
            "node": "Send Invoice Edit Confirmation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Estimate via API": {
      "main": [
        [
          {
            "node": "Send Estimate Creation Confirmation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Estimate via API": {
      "main": [
        [
          {
            "node": "Send Estimate Edit Confirmation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Dashboard Stats": {
      "main": [
        [
          {
            "node": "Send Stats Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Jobs List": {
      "main": [
        [
          {
            "node": "Send Jobs List Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Invoices List": {
      "main": [
        [
          {
            "node": "Send Invoices List Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2024-01-07T12:00:00.000Z",
  "id": "bizworx-telegram-workflow",
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "BizWorx Complete Business Automation with Telegram",
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [
    {
      "createdAt": "2024-01-07T12:00:00.000Z",
      "id": "bizworx-telegram-automation",
      "name": "BizWorx Telegram Automation",
      "updatedAt": "2024-01-07T12:00:00.000Z"
    }
  ],
  "triggerCount": 0,
  "updatedAt": "2024-01-07T12:00:00.000Z",
  "versionId": "4"
}
